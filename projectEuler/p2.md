
# [Problem 2 - Even Fibonacci Numbers](https://projecteuler.net/problem=2)

Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:

    1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...

By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.

### Answer

4613732

## Solutions

Parameters:
* `x` - Maximum number, i.e., `x = 4000000`.

### Q

```q
.math.fib:{x,sum -2#x}/[;0 1];       // First x+2 numbers in the Fibonacci sequence
.math.fibm:-1_.math.fib {x>last y}@; // Fibonacci numbers below some maximum

f:{sum n where count[n:.math.fibm x]#100b}
f 4000000
```

### K4

```k
.math.fib:{x,+/-2#x}/[;0 1];        // First x+2 numbers in the Fibonacci sequence
.math.fibm:-1_.math.fib {x>(:/)y}@; // Fibonacci numbers below some maximum

f:{+/n@&#:[n:.math.fibm x]#100b}
f 4000000
```

### C

```c
#include <math.h>
#include <stdint.h>
#include <stdio.h>

// Compute the n-th number of the Fibonacci sequence
uint64_t fibn(uint64_t n) {
    double goldenRatio = 0.5 * (1 + sqrt(5));
    return (pow(goldenRatio, n) - pow(1 - goldenRatio, n)) / sqrt(5);
}

uint64_t f(uint64_t x) {
    uint64_t n = 0, s = 0, i = 0;
    while (x > (n = fibn(i))) { i += 3; s += n; }
    return s;
}

int main(void) {
    printf("%ld\n", f(4000000)); 
    return 0; 
}
```

### Python

```python
import math
golden_ratio = 0.5 * (1 + math.sqrt(5))
golden_ratio_conjugate = 1 - golden_ratio
def fibn(n):
    return int((golden_ratio ** n - golden_ratio_conjugate ** n) / math.sqrt(5))

def f(x):
    i, s = 0, 0
    while x > (n := fibn(i)):
        i += 3
        s += n
    return s

print(f(4000000))
```

## Haskell

```haskell
f :: Int -> Int
f x = sum (takeWhile (< x) [fibn n | n <- [3,6..]])
    where
        goldenRatio = 0.5 * (1 + sqrt 5)
        conjugate = 1 - goldenRatio
        fibn :: Int -> Int
        fibn n = round ((goldenRatio ** fromIntegral  n - conjugate ** fromIntegral n) / sqrt 5)

f 4000000
```
